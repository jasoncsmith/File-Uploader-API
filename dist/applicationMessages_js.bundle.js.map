{"version":3,"file":"applicationMessages_js.bundle.js?ver=3dfdd6339bd4bee7c2de","mappings":"8HAmEA,UApDqB,WACjB,IAAMA,EAA8CC,EAAGC,gBAAgB,IACjEC,EAAmB,IACnBC,EAAsBH,EAAGI,QAU/B,SAASC,IACLN,EAASO,WACb,CAEA,SAASC,EAAOC,GACZA,EAAQC,kBAAiB,GACzBC,YAAW,kBAAMX,EAASQ,OAAOC,EAAQ,GAAE,IAC/C,CAEA,SAASG,EAAIC,GACT,IAAMC,EAlBV,SAAgBD,GACZ,MAAO,CACHE,KAAMd,EAAGe,WAAW,eAAD,OAAgBH,EAAQE,OAC3CE,QAAShB,EAAGe,WAAWH,EAAQI,SAAW,IAC1CP,iBAAkBT,EAAGe,YAAW,GAAME,OAAO,CAAEC,OAAQ,WAE/D,CAYiCC,CAAOP,GAEpCb,EAASqB,KAAKP,GAETD,EAAQS,cACTX,WAAWH,EAAOe,KAAK,KAAMT,GAAaD,EAAQV,UAAYA,EAEtE,CAYA,MAAO,CACHH,SAAAA,EACAM,MAAAA,EACAE,OAAAA,EACAI,IAAAA,EACAY,WAfJ,WACIpB,EAAGqB,UAAU,0BAA2Bb,GACxCR,EAAGqB,UAAU,6BAA8BjB,GAC3CJ,EAAGqB,UAAU,4BAA6BnB,EAC9C,EAYIoB,QAVJ,WACIpB,GACJ,EAUJ,C","sources":["webpack://appLaunch/./src/components/applicationMessages/applicationMessages.ts"],"sourcesContent":["import './applicationMessages.scss';\n\ninterface IMessageOptions {\n    type: 'string';\n    content: 'string';\n    isPersistant?: boolean;\n    duration?: number;\n}\n\ninterface IMessage {\n    type: KnockoutObservable<string>;\n    content: KnockoutObservable<string>;\n    removedAnimation: KnockoutObservable<boolean>\n}\n\nconst AppMessaging = function () {\n    const messages: KnockoutObservableArray<IMessage> = ko.observableArray([]);\n    const duration: number = 5000;\n    const kp: KnockoutPostBox = ko.postbox;\n\n    function create(options: IMessageOptions): IMessage {\n        return {\n            type: ko.observable(`message--is-${options.type}`),\n            content: ko.observable(options.content || ''),\n            removedAnimation: ko.observable(true).extend({ notify: 'always' })\n        };\n    }\n\n    function clear(): void {\n        messages.removeAll();\n    }\n\n    function remove(message: IMessage): void {\n        message.removedAnimation(true);\n        setTimeout(() => messages.remove(message), 300); // wait until animation is finished\n    }\n\n    function add(options: IMessageOptions): void {\n        const newMessage: IMessage = create(options);\n\n        messages.push(newMessage);\n\n        if (!options.isPersistant) {\n            setTimeout(remove.bind(null, newMessage), options.duration || duration);\n        }\n    }\n\n    function initialize(): void {\n        kp.subscribe('add-application-message', add);\n        kp.subscribe('remove-application-message', remove);\n        kp.subscribe('clear-application-message', clear);\n    }\n\n    function destroy(): void {\n        clear();\n    }\n\n    return {\n        messages,\n        clear,\n        remove,\n        add,\n        initialize,\n        destroy\n    };\n};\n\nexport default AppMessaging;"],"names":["messages","ko","observableArray","duration","kp","postbox","clear","removeAll","remove","message","removedAnimation","setTimeout","add","options","newMessage","type","observable","content","extend","notify","create","push","isPersistant","bind","initialize","subscribe","destroy"],"sourceRoot":""}